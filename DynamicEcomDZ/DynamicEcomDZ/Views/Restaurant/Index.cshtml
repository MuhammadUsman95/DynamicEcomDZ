@model SliderViewModel
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Restaurants</title>
    <link rel="icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: #f6f7fb;
        }

        /* ===== HEADER ===== */
        header {
            background: #fff;
            box-shadow: 0 2px 12px rgba(0,0,0,.07);
            position: sticky;
            top: 0;
            z-index: 999;
        }

        .header-inner {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 28px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 9px;
            text-decoration: none;
        }

        .logo-box {
            width: 36px;
            height: 36px;
            background: #e84545;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 18px;
        }

        .logo-name {
            font-size: 1.2rem;
            font-weight: 700;
            color: #1a1a2e;
        }

            .logo-name span {
                color: #e84545;
            }

        .header-nav {
            display: flex;
            align-items: center;
            gap: 26px;
            list-style: none;
        }

            .header-nav a {
                text-decoration: none;
                font-size: .88rem;
                font-weight: 500;
                color: #444;
                transition: color .2s;
            }

                .header-nav a:hover {
                    color: #e84545;
                }

        .btn-signin {
            background: #e84545;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 8px 20px;
            font-size: .85rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: background .2s;
        }

            .btn-signin:hover {
                background: #c0392b;
                color: #fff;
            }

        @@media (max-width: 768px) {
            .header-nav {
                display: none;
            }

            .header-inner {
                padding: 12px 18px;
            }
        }

        /* ===== SLIDER ===== */
        #mainSlider {
            overflow: hidden;
        }

            #mainSlider img {
                height: 480px;
                width: 100%;
                object-fit: cover;
            }

            #mainSlider .carousel-item::before {
                content: '';
                position: absolute;
                inset: 0;
                background: linear-gradient( to right, rgba(0,0,0,.75) 0%, rgba(0,0,0,.35) 55%, transparent 100% );
                z-index: 1;
            }

        .carousel-caption {
            position: absolute;
            top: 50%;
            left: 70px;
            right: auto;
            transform: translateY(-50%);
            text-align: left;
            z-index: 2;
            padding: 0;
            max-width: 480px;
        }
/* 
        .slide-badge {
            display: inline-block;
            background: #e84545;
            color: #fff;
            font-size: .72rem;
            font-weight: 600;
            letter-spacing: .09em;
            text-transform: uppercase;
            padding: 5px 14px;
            border-radius: 30px;
            margin-bottom: 16px;
        } */

        .carousel-caption h2 {
            font-size: 2.6rem;
            font-weight: 700;
            color: #fff;
            line-height: 1.2;
            margin-bottom: 12px;
        }

        .carousel-caption p {
            font-size: .95rem;
            color: rgba(255,255,255,.8);
            margin-bottom: 24px;
        }

        .slide-cta {
            display: inline-block;
            background: #e84545;
            color: #fff;
            padding: 11px 28px;
            border-radius: 9px;
            font-weight: 600;
            font-size: .9rem;
            text-decoration: none;
            transition: background .2s, transform .2s;
        }

            .slide-cta:hover {
                background: #c0392b;
                color: #fff;
                transform: translateY(-2px);
            }

        .carousel-control-prev,
        .carousel-control-next {
            width: 44px;
            height: 44px;
            background: rgba(255,255,255,.15);
            backdrop-filter: blur(4px);
            border-radius: 50%;
            top: 50%;
            bottom: auto;
            transform: translateY(-50%);
            margin: 0 18px;
            opacity: 1;
            border: 1.5px solid rgba(255,255,255,.25);
            transition: background .2s;
        }

            .carousel-control-prev:hover,
            .carousel-control-next:hover {
                background: #e84545;
                border-color: #e84545;
            }

        .carousel-indicators {
            margin-bottom: 20px;
        }

            .carousel-indicators [data-bs-target] {
                width: 8px;
                height: 8px;
                border-radius: 50%;
                background: rgba(255,255,255,.45);
                border: none;
                margin: 0 4px;
                transition: .3s;
            }

            .carousel-indicators .active {
                width: 26px;
                border-radius: 4px;
                background: #e84545;
            }

        @@media (max-width: 768px) {
            #mainSlider img {
                height: 260px;
            }

            .carousel-caption {
                left: 24px;
                max-width: 75%;
            }

                .carousel-caption h2 {
                    font-size: 1.4rem;
                }

                .carousel-caption p {
                    display: none;
                }

            .slide-cta {
                padding: 8px 18px;
                font-size: .8rem;
            }
        }

        /* ===== RESTAURANTS ===== */
        .customer-card {
            border-radius: 14px;
            transition: .3s;
            border: none;
            box-shadow: 0 2px 12px rgba(0,0,0,.07);
        }

            .customer-card:hover {
                transform: translateY(-6px);
                box-shadow: 0 10px 25px rgba(0,0,0,.2);
            }

        .star-filled {
            color: #ffc107;
        }

        .star-empty {
            color: #ddd;
        }

        .card-img, .card-img-bottom, .card-img-top {
            width: 100%;
            height: 16vh;
            object-fit: cover;
        }

        .delivery-badge {
            position: absolute;
            top: 8px;
            left: 8px;
            font-size: 11px;
            padding: 4px 7px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .filter-input, .filter-select {
            border: 1.5px solid #e8e8e8;
            border-radius: 9px;
            font-size: .85rem;
            padding: 8px 14px;
            transition: border-color .2s;
        }

            .filter-input:focus, .filter-select:focus {
                border-color: #e84545;
                box-shadow: 0 0 0 3px rgba(232,69,69,.1);
                outline: none;
            }

        @@media (max-width: 768px) {
            .filter-wrap {
                flex-direction: column;
                width: 100%;
            }

            .filter-input, .filter-select {
                width: 100%;
            }
        }

        /* ===== FOOTER ===== */
        footer {
            background: #1a1a2e;
            color: rgba(255,255,255,.6);
            margin-top: 60px;
        }

        .footer-body {
            display: grid;
            grid-template-columns: 1.6fr 1fr 1fr;
            gap: 40px;
            padding: 48px 40px 36px;
            border-bottom: 1px solid rgba(255,255,255,.07);
        }

        @@media (max-width: 768px) {
            .footer-body {
                grid-template-columns: 1fr;
                gap: 24px;
                padding: 32px 24px;
            }
        }

        .footer-brand-desc {
            font-size: .84rem;
            line-height: 1.75;
            margin-top: 12px;
            color: rgba(255,255,255,.45);
        }

        .footer-socials {
            display: flex;
            gap: 9px;
            margin-top: 18px;
        }

            .footer-socials a {
                width: 34px;
                height: 34px;
                border-radius: 8px;
                background: rgba(255,255,255,.07);
                color: rgba(255,255,255,.6);
                display: flex;
                align-items: center;
                justify-content: center;
                text-decoration: none;
                font-size: .95rem;
                transition: .2s;
            }

                .footer-socials a:hover {
                    background: #e84545;
                    color: #fff;
                }

        .footer-col h6 {
            font-size: .78rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: .1em;
            color: #fff;
            margin-bottom: 14px;
        }

        .footer-col ul {
            list-style: none;
        }

            .footer-col ul li {
                margin-bottom: 9px;
            }

                .footer-col ul li a {
                    color: rgba(255,255,255,.45);
                    text-decoration: none;
                    font-size: .84rem;
                    transition: color .2s;
                }

                    .footer-col ul li a:hover {
                        color: #e84545;
                    }

        .footer-bottom {
            text-align: center;
            padding: 16px 24px;
            font-size: .78rem;
            color: rgba(255,255,255,.25);
        }

            .footer-bottom a {
                color: #e84545;
                text-decoration: none;
            }
    </style>
</head>
<body>

    <!-- ====== HEADER ====== -->
    <header>
        <div class="header-inner">
            <a href="/" class="logo">
                @* <div class="logo-box"><i class="bi bi-shop"></i><
                    
                /div>
                <div class="logo-name">Food<span>Hub</span></div> *@

                <img src="@("/images/png orignal.png")"
                     alt="Logo"
                     style="height: 48px; width: auto; object-fit: contain;" />
@*                 <div class="cart-icon" id="cartIcon" onclick="toggleCart()">
                    <span class="cart-count" id="cartCount">0</span>
                    <i class="bi bi-cart3"></i>
                </div> *@
            </a>



@*             <ul class="header-nav">
                <li><a href="#">Home</a></li>
                <li><a href="#">Restaurants</a></li>
                <li><a href="#">Offers</a></li>
                <li><a href="#">Contact</a></li>
            </ul> *@

            @* <a href="#" class="btn-signin">Sign In</a> *@
        </div>
    </header>


    <!-- ====== SLIDER ====== -->
    <div id="mainSlider" class="carousel slide" data-bs-ride="carousel">

        <div class="carousel-indicators">
            @for (int i = 0; i < Model.Sliders.Count; i++)
            {
                <button type="button"
                        data-bs-target="#mainSlider"
                        data-bs-slide-to="@i"
                        class="@(i == 0 ? "active" : "")"></button>
            }
        </div>

        <div class="carousel-inner">
            @for (int i = 0; i < Model.Sliders.Count; i++)
            {
                var s = Model.Sliders[i];
                <div class="carousel-item @(i == 0 ? "active" : "")"
                     data-bs-interval="@(s.SliderMovingTimer * 1000)">
                    <img src="@("/images/SliderRegistration/" + s.SliderName)" alt="@s.HeadingSlider">
                    <div class="carousel-caption">
                        @* <span class="slide-badge">🍽️ Featured</span> *@
                        <h2>@s.HeadingSlider</h2>
                        <p>@s.DescriptionSlider</p>
                        <a href="#restaurants" class="slide-cta">Order Now &nbsp;<i class="bi bi-arrow-right"></i></a>
                    </div>
                </div>
            }
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#mainSlider" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#mainSlider" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>


    <!-- ====== RESTAURANTS ====== -->
    <div class="container mt-5" id="restaurants">
        <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 gap-2">
            <h3 style="font-weight:700; font-size:1.45rem; color:#1a1a2e;">Our Restaurants</h3>

            <div class="d-flex gap-2 filter-wrap">
                <input type="text" id="restaurantSearch" class="filter-input" placeholder="Search restaurant..." style="width:200px">
                <select id="typeFilter" class="filter-select" style="width:140px">
                    <option value="all">All Types</option>
                    @foreach (var type in Model.Customers.Select(x => x.Type).Distinct())
                    {
                        <option value="@type">@type</option>
                    }
                </select>
            </div>
        </div>

        <div class="row justify-content-center">
            @foreach (var c in Model.Customers)
            {
                <div class="col-6 col-sm-6 col-md-3 col-lg-2 mb-4">
                    <a href="javascript:void(0)" class="text-decoration-none restaurant-link" data-id="@c.CustomerId">
                        <div class="card customer-card h-100">
                            <div class="position-relative">
                                <img src="@("/images/VendorRegistration/" + c.ImagePath)" class="card-img-top" alt="@c.Customer">
                                <span class="badge @(c.DeliveryCharges == 0 ? "bg-success" : "bg-warning text-dark") delivery-badge">
                                    <i class="bi bi-truck"></i>
                                    @(c.DeliveryCharges == 0 ? "Free Delivery" : $"Rs. {c.DeliveryCharges}")
                                </span>
                            </div>
                            <div class="card-body text-center" style="padding-bottom:5px;">
                                <h6 class="fw-bold">@c.Customer</h6>
                                <span class="badge bg-primary">@c.Type</span>
                                <div class="small text-muted mt-1" style="font-size:11px;">
                                    <i class="bi bi-clock"></i> @c.Timing
                                </div>
                                <div class="mt-2" style="font-size:22px;">
                                    @for (int i = 1; i <= 5; i++)
                                    {
                                        <span class="@(i <= c.Rating ? "star-filled" : "star-empty")">★</span>
                                    }
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            }
        </div>
    </div>


    <!-- CLOSED MODAL -->
    <div class="modal fade" id="closedModal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content text-center">
                <div class="modal-header bg-danger text-white border-0">
                    <h5 class="modal-title">Restaurant Not Available</h5>
                </div>
                <div class="modal-body py-4" id="closedModalBody">
                    This restaurant is currently closed.
                </div>
                <div class="modal-footer justify-content-center border-0">
                    <button class="btn btn-danger px-4" data-bs-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>


    <!-- ====== FOOTER ====== -->
    <footer>
        <div class="footer-body">
            <div>
                <a href="/" class="logo" style="display:inline-flex;">
                    <div class="logo-box"><i class="bi bi-shop"></i></div>
                    <div class="logo-name" style="color:#fff;">Food<span>Hub</span></div>
                </a>
                <p class="footer-brand-desc">Your favourite food, delivered fast. We connect you with the best restaurants — fresh, hot, right to your door.</p>
                <div class="footer-socials">
                    <a href="#"><i class="bi bi-facebook"></i></a>
                    <a href="#"><i class="bi bi-instagram"></i></a>
                    <a href="#"><i class="bi bi-twitter-x"></i></a>
                    <a href="#"><i class="bi bi-whatsapp"></i></a>
                </div>
            </div>

            <div class="footer-col">
                <h6>Quick Links</h6>
 @*                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Restaurants</a></li>
                    <li><a href="#">Offers & Deals</a></li>
                    <li><a href="#">Track Order</a></li>
                    <li><a href="#">Become a Partner</a></li>
                </ul> *@
            </div>

            <div class="footer-col">
                <h6>Support</h6>
                <ul>
                    <li><a href="#">FAQs</a></li>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#"><i class="bi bi-telephone-fill" style="color:#e84545"></i> &nbsp;+92-300-0000000</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            &copy; @DateTime.Now.Year <strong style="color:rgba(255,255,255,.4)">FoodHub</strong>. All rights reserved &nbsp;&middot;&nbsp;
            Made with <span style="color:#e84545">&#9829;</span> in Pakistan &nbsp;&middot;&nbsp;
            <a href="#">Privacy</a> &nbsp;&middot;&nbsp; <a href="#">Terms</a>
        </div>
    </footer>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        document.querySelectorAll('.restaurant-link').forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();
                fetch('/Restaurant/CheckRestaurantValidation', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ RestaurantId: this.dataset.id })
                })
                .then(r => r.json())
                .then(data => {
                    if (data.statusId === 0) {
                        document.getElementById('closedModalBody').innerHTML = data.message;
                        new bootstrap.Modal(document.getElementById('closedModal')).show();
                    } else {
                        window.location.href = `/RestaurantDetail/Index/${this.dataset.id}`;
                    }
                })
                .catch(() => alert('Server error. Please try again.'));
            });
        });

        document.addEventListener("DOMContentLoaded", function () {
            const search = document.getElementById("restaurantSearch");
            const filter = document.getElementById("typeFilter");
            const cards = document.querySelectorAll(".restaurant-link");

            function run() {
                const q = search.value.toLowerCase();
                const t = filter.value.toLowerCase();
                cards.forEach(c => {
                    const name = c.querySelector("h6").innerText.toLowerCase();
                    const type = c.querySelector(".badge.bg-primary").innerText.toLowerCase();
                    c.closest(".col-6").style.display =
                        name.includes(q) && (t === "all" || type === t) ? "block" : "none";
                });
            }

            search.addEventListener("keyup", run);
            filter.addEventListener("change", run);
        });
    </script>

</body>
</html>
